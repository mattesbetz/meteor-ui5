"use strict";sap.ui.define(["jquery.sap.global","sap/ui/model/ListBinding","sap/ui/model/Context","sap/ui/model/ChangeReason","sap/ui/model/Filter"],function(a,b,c,d,e){var f=b.extend("meteor-ui5.model.mongo.DocumentListBinding",{constructor:function(a,c,d,e,f,g){b.call(this,a,c,d,e,f,g),this._aContexts=[],this._runQuery()}});return f.prototype._runQuery=function(){var a=this;this._oQueryHandle&&this._oQueryHandle.stop(),this._aContexts=[],this._fireChange(d.remove);var b=this.oModel.runQuery(this.sPath,this.oContext,this.aSorters,this.aApplicationFilters);this._oQueryHandle=b.observeChanges({addedBefore:function(b,e,f){var g=new c(a.oModel,a.sPath+"("+b+")");a._aContexts.push(g),a.fireDataReceived(),a._fireChange(d.add)},changed:function(b,c){a.oModel.refresh()},removed:function(b){a.oModel.refresh()}})},f.prototype.getContexts=function(a,b){var c=void 0===a?0:a,d=void 0===b?this.oModel.iSizeLimit-c:b;return this._aContexts.slice(c).splice(0,d)},f.prototype.destroy=function(){this._oQueryHandle&&this._oQueryHandle.stop()},f.prototype.filter=function(b,c){this.aFilters=[],!a.isArray(b)&&b instanceof e?b=[b]:a.isArray(b)||(b=[]),this.aApplicationFilters=b,this._runQuery()},f.prototype.sort=function(a){Array.isArray(a)?this.aSorters=a:this.aSorters=[a],this._runQuery()},f.prototype.getCurrentContexts=function(){return this._aContexts},f.prototype.getLength=function(){return this._aContexts.length},f.prototype.isLengthFinal=function(){return!1},f.prototype.getDistinctValues=function(a){return null},f.prototype.enableExtendedChangeDetection=function(a,b){this.bUseExtendedChangeDetection=!0,this.bDetectUpdates=a,"string"==typeof b?this.fnGetEntryKey=function(a){return a.getProperty(b)}:"function"==typeof b&&(this.fnGetEntryKey=b),this.update&&this.update()},f});
"use strict";sap.ui.define(["jquery.sap.global","sap/ui/model/ListBinding","sap/ui/model/Context","sap/ui/model/ChangeReason"],function(a,b,c,d){var e=b.extend("meteor-ui5.model.mongo.PropertyListBinding",{constructor:function(a,c,d,e,f,g){b.call(this,a,c,d,e,f,g),this._aContexts=[],this._runQuery()}});return e.prototype._runQuery=function(){var a=this;this._oQueryHandle&&this._oQueryHandle.stop(),this._aContexts=[],this._fireChange(d.remove),this._oCursor=this.oModel.runQuery(this.sPath,this.oContext,this.aSorters,this.aApplicationFilters),this._oQueryHandle=this._oCursor.observeChanges({addedBefore:function(b,c,e){a.fireDataReceived(),a._fireChange(d.add)},changed:function(b,c){a.oModel.refresh()},removed:function(b){a.oModel.refresh()}})},e.prototype.getContexts=function(a,b){var d=this;this._aContexts=[];var e=this._oCursor.fetch()[0],f=_.get(e,this.sPath);Array.isArray(f)?f.forEach(function(a,b){var e=d.oContext.sPath+"/"+d.sPath+"["+b+"]",f=new c(d.oModel,e);d._aContexts.push(f)}):console.error(this.sPath+" is not an array.");var g=void 0===a?0:a,h=void 0===b?this.oModel.iSizeLimit-g:b;return this._aContexts.slice(g).splice(0,h)},e.prototype.destroy=function(){this._oQueryHandle&&this._oQueryHandle.stop()},e.prototype.filter=function(a,b){this.aApplicationFilters=a,this._runQuery()},e.prototype.sort=function(a){Array.isArray(a)?this.aSorters=a:this.aSorters=[a],this._runQuery()},e.prototype.getCurrentContexts=function(){return this._aContexts},e.prototype.getLength=function(){return this._aContexts.length},e.prototype.isLengthFinal=function(){return!1},e.prototype.getDistinctValues=function(a){return null},e.prototype.enableExtendedChangeDetection=function(a,b){this.bUseExtendedChangeDetection=!0,this.bDetectUpdates=a,"string"==typeof b?this.fnGetEntryKey=function(a){return a.getProperty(b)}:"function"==typeof b&&(this.fnGetEntryKey=b),this.update&&this.update()},e});
"use strict";sap.ui.define(["sap/ui/model/ContextBinding","sap/ui/model/ChangeReason"],function(a,b){var c=a.extend("meteor-ui5.model.mongo.ContextBinding",{constructor:function(b,c,d,e,f){a.call(this,b,c,d,e,f),this._runQuery();var g=this;b.createBindingContext(c,d,e,function(a){g.bInitial=!1,g.oElementContext=a})}});return c.prototype.destroy=function(){this._oQueryHandle&&this._oQueryHandle.stop()},c.prototype._runQuery=function(){var a=this;this._oQueryHandle&&this._oQueryHandle.stop();var c=this.oModel.runQuery(this.sPath,this.oContext);this._oQueryHandle=c.observeChanges({addedBefore:function(c,d,e){a.fireDataReceived(),a._fireChange(b.add)},changed:function(c,d){a._fireChange(b.change)},removed:function(c){a._fireChange(b.remove)}})},c.prototype.refresh=function(a){var b=this;this.oModel.createBindingContext(this.sPath,this.oContext,this.mParameters,function(c){b.oElementContext!==c||a?(b.oElementContext=c,b._fireChange()):b.oModel.checkUpdate(!0,c)},!0)},c.prototype.initialize=function(){var a=this;this.oModel.createBindingContext(this.sPath,this.oContext,this.mParameters,function(b){a.oElementContext=b,a._fireChange()},!0)},c.prototype.setContext=function(a){var b=this;this.oContext!=a&&(this.oContext=a,this.oModel.createBindingContext(this.sPath,this.oContext,this.mParameters,function(a){b.oElementContext=a,b._fireChange()}))},c});